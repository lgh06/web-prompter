{"version":3,"sources":["helpers/css.js","helpers/Async.js","helpers/http.js","helpers/ErrorBoundary.js","pages/HomePage.js","components/Setting.js","components/Viewer.js","components/Setting.module.scss","components/Viewer.module.scss","reducers/playerSlice.js","pages lazy /^/.*$/ groupOptions: {} namespace object","components lazy /^/.*$/ groupOptions: {} namespace object","App.js","store.js","index.js"],"names":["genClassName","styles","cn","classStr","arr","String","trim","split","result","forEach","v","indexOf","substr","genClassString","className","innerHTML","html","dangerouslySetInnerHTML","__html","DefaultLoading","AsyncPage","loadable","props","page","fallback","cacheKey","comp","genFetch","method","path","dataObj","upperCaseMethod","toUpperCase","body","JSON","stringify","Object","keys","fetch","headers","then","res","json","http","post","POST","get","GET","ErrorBoundary","state","hasError","error","errorInfo","this","children","React","Component","HomePage","style","minHeight","Setting","dispatch","useDispatch","useSelector","player","speed","viewerCSS","onClick","type","value","onChange","e","target","key","hint","map","name","id","placeholder","onInput","tmpValue","currentTarget","Viewer","playing","movedHeight","paused","useEffect","document","addEventListener","keyCode","console","log","querySelector","transform","intervalId","tmpMovedHeight","setInterval","clearInterval","contentEditable","scrollHeight","clientHeight","suppressContentEditableWarning","setInnerHTML","module","exports","nosleep","NoSleep","setPlayAndAnimation","createAsyncThunk","payload","a","getState","setPlay","animation","playerSlice","createSlice","initialState","backgroundColor","color","fontSize","fontWeight","fontFamily","lineHeight","reducers","setSpeed","action","p","enable","requestFullscreen","disable","fullscreenElement","exitFullscreen","h","setViewerCSS","assign","setState","extraReducers","actions","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","Error","code","ids","all","slice","t","App","basename","to","exact","configureStore","reducer","ReactDOM","render","store","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b5a27202.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction genClassString(styles) {\r\n  return (classStr) => {\r\n    let arr = String(classStr).trim().split(' ');\r\n    let result = '';\r\n    arr.forEach(v => {\r\n      // if cn('@x'), use original 'xx' as classname.\r\n      if (v.indexOf('@')===0) {\r\n        result += v.substr(1);\r\n      } else {\r\n        result += styles[v] || '';\r\n      }\r\n      result += ' ';\r\n    });\r\n    return result;\r\n  };\r\n}\r\n\r\nfunction genClassName(styles){\r\n  const cn = genClassString(styles);\r\n  return (classStr) => {\r\n    return {\r\n      className: cn(classStr)\r\n    }\r\n  }\r\n}\r\n\r\nconst getImageURL = src => {\r\n  let finalSrc = '';\r\n  if (String(src).match(/(http.*)?\\/\\//)) {\r\n    finalSrc = src;\r\n  } else {\r\n    if (!process.env.HOMEPAGE_IMG_URL) {\r\n      process.env.HOMEPAGE_IMG_URL = 'https://stage-drupal.car.co.uk/s3fs-public/img';\r\n    }\r\n    finalSrc = process.env.HOMEPAGE_IMG_URL + src;\r\n  }\r\n  return finalSrc;\r\n};\r\n\r\nconst ImageHolder = ({ width, height, className, bgColor, textColor, text, src, alt, lazy }) => {\r\n  if (src) {\r\n    return (\r\n      <img\r\n        data-src={lazy ? getImageURL(src) : null}\r\n        src={lazy ? null : getImageURL(src)}\r\n        className={`${className} ${lazy ? 'lazyload' : ''}`}\r\n        alt={alt || ''}\r\n        style={{\r\n          width: `${Number.isNaN(Number(width)) ? width : `${width}px`}` || null,\r\n          height: `${Number.isNaN(Number(height)) ? height : `${height}px`}` || null,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  bgColor = bgColor || 'CCCCCC';\r\n  textColor = textColor || '000000';\r\n  text = text || '';\r\n  return (\r\n    <img\r\n      src={`https://via.placeholder.com/${width}x${height}/${bgColor}/${textColor}/?text=${text}`}\r\n      className={className}\r\n      alt={`${width}x${height}`}\r\n    />\r\n  );\r\n};\r\n\r\nImageHolder.propTypes = {\r\n  width: PropTypes.string,\r\n  height: PropTypes.string,\r\n  className: PropTypes.string,\r\n  bgColor: PropTypes.string,\r\n  textColor: PropTypes.string,\r\n  text: PropTypes.string,\r\n  src: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  lazy: PropTypes.bool,\r\n};\r\nImageHolder.defaultProps = {\r\n  lazy: true,\r\n};\r\n\r\nconst innerHTML = html => {\r\n  return {\r\n    dangerouslySetInnerHTML: {\r\n      __html: html,\r\n    },\r\n  };\r\n};\r\n\r\nfunction firstLetterUpperCase(str) {\r\n  if (typeof str === 'string') {\r\n    return str.charAt(0).toUpperCase() + str.slice(1);\r\n  }\r\n  return '';\r\n}\r\n\r\nfunction lazyLoadBackgroundImage(refArr) {\r\n  const observer = new IntersectionObserver(\r\n    entries => {\r\n      entries.forEach(entry => {\r\n        if (entry.isIntersecting) {\r\n          // eslint-disable-next-line no-param-reassign\r\n          (entry.target).style.backgroundImage = entry.target.getAttribute('data-background-image');\r\n        }\r\n      });\r\n    },\r\n    { rootMargin: '10px 10px 200px 10px' },\r\n  );\r\n  if (refArr.current && Array.isArray(refArr.current)) {\r\n    refArr.current.forEach(v => {\r\n      observe(v);\r\n    });\r\n  } else {\r\n    observe(refArr.current);\r\n  }\r\n\r\n  function observe(element) {\r\n    if (!element) return;\r\n    if (window && window.IntersectionObserver) {\r\n      observer.observe(element);\r\n    } else {\r\n      element.style.backgroundImage = element.getAttribute('data-background-image');\r\n    }\r\n  }\r\n}\r\nexport { ImageHolder, innerHTML, getImageURL, firstLetterUpperCase, lazyLoadBackgroundImage, genClassString, genClassName };","import React from 'react';\r\nimport loadable from '@loadable/component'\r\n\r\n// see also https://github.com/edgefront/cms-mono/tree/mono/packages/cms-admin/src\r\n// https://loadable-components.com/docs/dynamic-import/\r\nconst DefaultLoading = () => <div className=\"animated fadeIn pt-1 text-center\">Loading...</div>\r\nconst AsyncPage = loadable(props => import(`../pages/${props.page}`), {\r\n  fallback: <DefaultLoading></DefaultLoading>,\r\n  cacheKey: props => props.page,\r\n})\r\n\r\nconst AsyncComp = loadable(props => import(`../components/${props.comp}`), {\r\n  fallback: <DefaultLoading></DefaultLoading>\r\n})\r\n\r\nexport {DefaultLoading, AsyncPage, AsyncComp}","const baseURL =  '';// 'http://localhost:3000/v1/';\r\n\r\nfunction genFetch(method) {\r\n  return (path, dataObj) => {\r\n    const upperCaseMethod = method.toUpperCase();\r\n    let body = JSON.stringify(dataObj);\r\n    if (upperCaseMethod === 'GET' || upperCaseMethod === 'HEAD') {\r\n      body = null;\r\n      path += '?'\r\n      Object.keys(dataObj).forEach(v => {\r\n        path += v + '=' + dataObj[v]\r\n      }) \r\n    }\r\n    return fetch(baseURL + path, {\r\n      method: upperCaseMethod,\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: body\r\n    }).then(res => res.json())\r\n  }\r\n}\r\n\r\nconst http = {\r\n  post: genFetch('post'),\r\n  POST: genFetch('post'),\r\n  get: genFetch('get'),\r\n  GET: genFetch('get'),\r\n}\r\nexport { http };\r\n","import React from \"react\";\r\n\r\n// https://reactjs.org/docs/error-boundaries.html\r\nexport class ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // Update state so the next render will show the fallback UI.\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    // You can also log the error to an error reporting service\r\n    // logErrorToMyService(error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      return (<>\r\n      <h1>Network or internal server error. Please try again.</h1>\r\n      <h1>网络问题，或内部服务器错误。请稍候再试。</h1>\r\n      </>);\r\n    }\r\n\r\n    return this.props.children; \r\n  }\r\n}","import React from \"react\";\r\nimport Setting from \"../components/Setting\";\r\nimport Viewer from \"../components/Viewer\";\r\n\r\nexport default function HomePage(){\r\n  return (<div style = {{\r\n    minHeight: '360px',\r\n  }}>\r\n    <Viewer></Viewer>\r\n    <Setting></Setting>\r\n  </div>);\r\n}","import { useDispatch, useSelector } from 'react-redux'\r\nimport * as player from '../reducers/playerSlice'\r\nimport { genClassName } from '../helpers';\r\nimport styles from './Setting.module.scss';\r\n\r\nconst cn = genClassName(styles);\r\n\r\nexport default function Setting(props) {\r\n  const dispatch = useDispatch()\r\n  const { speed, viewerCSS } = useSelector((state) => state.player)\r\n  const onChange = (e, name) => {\r\n    let tmpValue = e.currentTarget.value;\r\n    // if (name ==='fontSize'){\r\n    //   tmpValue += 'px'\r\n    // }\r\n    dispatch(player.setViewerCSS({\r\n      [name]: tmpValue\r\n    }))\r\n    \r\n  }\r\n  const cssNameAndHint = [\r\n    {\r\n      key: 'backgroundColor',\r\n      hint: '背景色',\r\n    },\r\n    {\r\n      key: 'color',\r\n      hint: '字体颜色',\r\n    },\r\n    {\r\n      key: 'fontFamily',\r\n      hint: '字体',\r\n    },\r\n    {\r\n      key: 'fontSize',\r\n      hint: '字体大小',\r\n    }, \r\n    {\r\n      key: 'fontWeight',\r\n      hint: '字体粗细',\r\n    },\r\n    {\r\n      key: 'lineHeight',\r\n      hint: '行间距',\r\n    },\r\n  ]\r\n  return (<div {...cn('setting-wrap')}>\r\n    Speed\r\n    <button onClick={()=>dispatch(player.setSpeed('+20'))}>+20</button>\r\n    <button onClick={()=>dispatch(player.setSpeed('-10'))}>-10</button>\r\n    <input type=\"number\" value={speed} onChange={(e)=>dispatch(player.setSpeed(e.target.value))}></input>\r\n    <br /><br />\r\n    {/* <button onClick={()=>dispatch(player.setInnerHTML(''))}>清空Clear</button>\r\n    <button onClick={()=>dispatch(player.setPlayAndAnimation('start'))}>开始Start</button>\r\n    <br /> */}\r\n    {cssNameAndHint.map(v => {\r\n      return (\r\n        <>\r\n        <span>{v.hint} {v.key}</span> &nbsp;\r\n        <input type=\"text\" name=\"\" value={viewerCSS[v.key]} id=\"\" placeholder={v.key} onInput={(e) => onChange(e, v.key)}/>\r\n        <br/>\r\n        </>\r\n      )\r\n    })}\r\n\r\n  </div>);\r\n}","import React, { useEffect } from 'react';\r\nimport styles from './Viewer.module.scss';\r\nimport { genClassName, ImageHolder, innerHTML as setInnerHTML } from '../helpers';\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport * as player from '../reducers/playerSlice'\r\n\r\n// used for scss modules https://create-react-app.dev/docs/adding-a-css-modules-stylesheet\r\nconst cn = genClassName(styles);\r\n\r\nexport default function Viewer() {\r\n  const { speed, playing, viewerCSS, movedHeight, paused } = useSelector((state) => state.player)\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown',(e) => {\r\n      if( (e.keyCode === 1 || e.keyCode === 87 ) && playing === 1){\r\n        dispatch(player.setPlay('exit'))      \r\n      }\r\n    })\r\n  });\r\n  useEffect(() => {\r\n    console.log('inside movedHeight')\r\n    document.querySelector('pre.text').style.transform = `translateY(-${movedHeight}px)`\r\n  }, [movedHeight])\r\n\r\n  useEffect(() => {\r\n    console.log('inside playing, speed')\r\n    let intervalId;\r\n    let tmpMovedHeight = movedHeight;\r\n    if (playing){\r\n      intervalId = setInterval(() => {\r\n        tmpMovedHeight += speed/2.5;\r\n        console.log(tmpMovedHeight, 'tmpMovedHeight')\r\n        dispatch(player.setState({key: 'movedHeight', value: tmpMovedHeight}))\r\n      }, 400)\r\n    } else {\r\n      clearInterval(intervalId);\r\n    }\r\n\r\n    if (paused) {\r\n      clearInterval(intervalId);\r\n    }\r\n\r\n    return () =>{\r\n      clearInterval(intervalId);\r\n    }\r\n  }, [playing, speed, movedHeight, paused])\r\n\r\n  const onChange = (e) => {\r\n    dispatch(player.setInnerHTML( e.target.innerHTML ))\r\n    console.log(e.currentTarget.scrollHeight,  document.body.clientHeight)\r\n    dispatch(player.setState({key: 'scrollHeight', value: e.currentTarget.scrollHeight}));\r\n    dispatch(player.setState({key: 'clientHeight', value: document.body.clientHeight}));\r\n  }\r\n  return (<div {...cn('viewer-wrap')}>\r\n    <div {...cn('viewer @viewer')} style={viewerCSS}>\r\n      <pre {...cn('text @text')} contentEditable={playing ? 'false': 'true'} onInput={onChange}\r\n        suppressContentEditableWarning={true}\r\n      >\r\n      You can paste or input texts here. <br/>\r\n      你可以把文字粘贴在这里。或用输入法输入。 <br/>\r\n      Ctrl + Shift + V , or right click, paste text only. <br/>\r\n      Ctrl + Shift + V ， 或 右键， 粘贴为纯文本 。\r\n      </pre>\r\n      <div {...cn('btn')} onClick={() =>dispatch(player.setPlayAndAnimation('prev'))}>向前Prev</div>\r\n      <div {...cn('btn')} onClick={()=>dispatch(player.setSpeed('-10'))}>慢点Slower</div>\r\n      <div {...cn('btn')} onClick={() =>dispatch(player.setPlayAndAnimation('pause'))}>\r\n        {paused?'恢复Continue' :'暂停Pause'}\r\n      </div>\r\n      <div {...cn('btn')} onClick={()=>dispatch(player.setSpeed('+20'))}>快点Faster</div>\r\n      <div {...cn('btn')} onClick={() =>dispatch(player.setPlayAndAnimation('next'))}>向后Next</div>\r\n      <div {...cn('exit-full @exit-full btn')} \r\n        onClick={() => playing ? dispatch(player.setPlayAndAnimation('exit')):\r\n          dispatch(player.setPlayAndAnimation('start'))\r\n      }>\r\n        {playing ? '退出Exit' : '开始Start'}\r\n      </div>\r\n      <div {...cn('btn clear')} onClick={()=>dispatch(player.setInnerHTML(''))}>清空Clear</div>\r\n\r\n    </div>\r\n    <div {...cn('status')} {...setInnerHTML('speed is ' + speed)} >\r\n      \r\n    </div>\r\n  </div>);\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"setting-wrap\":\"Setting_setting-wrap__3vvV6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"viewer-wrap\":\"Viewer_viewer-wrap__7NVBe\",\"viewer\":\"Viewer_viewer__3o03W\",\"text\":\"Viewer_text__XvupK\",\"btn\":\"Viewer_btn__GviqG\",\"exit-full\":\"Viewer_exit-full__1Srfv\",\"clear\":\"Viewer_clear__2Wx9c\",\"status\":\"Viewer_status__-aFxu\"};","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\nimport {dispatch} from 'react-redux'\r\nimport NoSleep from 'nosleep.js'\r\nlet nosleep = new NoSleep();\r\n\r\n\r\nconst setPlayAndAnimation = createAsyncThunk(\r\n  'player/setPlayAndAnimation',\r\n  async (payload, { dispatch, getState }) => {\r\n    dispatch(setPlay(payload))\r\n    //     dispatch({type:'player/animation'})\r\n    dispatch(animation(payload))\r\n    // return 1;\r\n  }\r\n)\r\n\r\n// one file mapping to one logic feature, basically.\r\n// https://redux-toolkit.js.org/usage/usage-guide\r\nexport const playerSlice = createSlice({\r\n  name: 'player',\r\n  initialState: {\r\n    speed: 10,\r\n    innerHTML: 'You can paste or input texts here. <br/>你可以把文字粘贴在这里。或用输入法输入。',\r\n    scrollHeight: 600, // whole pre height\r\n    clientHeight: 1080, // one screen height,\r\n    movedHeight: 0,\r\n    playing:0,\r\n    paused: 0,\r\n    viewerCSS: {\r\n      backgroundColor: '#333',\r\n      color: 'white',\r\n      fontSize: '72px',\r\n      fontWeight: 'bold',\r\n      fontFamily: 'Microsoft YaHei',\r\n      lineHeight: '1.4'\r\n    }\r\n  },\r\n  reducers: {\r\n    setSpeed: (state, action) => {\r\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\r\n      // doesn't actually mutate the state because it uses the Immer library,\r\n      // which detects changes to a \"draft state\" and produces a brand new\r\n      // immutable state based off those changes\r\n      var startWithPlusOrMinus = String(action.payload).indexOf('+') === 0 || \r\n        String(action.payload).indexOf('-') === 0;\r\n\r\n      if(startWithPlusOrMinus){\r\n        state.speed += (+action.payload);\r\n      } else {\r\n        state.speed = action.payload? (+action.payload) : state.speed;\r\n      }\r\n    },\r\n    setInnerHTML: (state, action) => {\r\n      state.innerHTML = action.payload;\r\n      if (action.payload === '') {\r\n        document.querySelector('pre.text').innerHTML = '';\r\n      }\r\n    },\r\n    setPlay: (state, action) =>{\r\n      let p = action.payload;\r\n      if (p === 'start') {\r\n        state.playing = 1;\r\n        nosleep.enable();\r\n        const $viewer = document.querySelector('.viewer')\r\n        $viewer.requestFullscreen();\r\n        // playerSlice.actions.animation();\r\n      }else if (p === 'exit'){\r\n        state.playing = 0;\r\n        state.paused = 0;\r\n        state.movedHeight = 0;\r\n        nosleep.disable();\r\n        // document.querySelector('.viewer').exitFullscreen()\r\n        document.fullscreenElement && document.exitFullscreen()\r\n      }else if (p === 'prev'){\r\n        let h = state.movedHeight - state.clientHeight/2;\r\n        if (h < 0) {\r\n          h = 0\r\n        }\r\n        state.movedHeight = h;\r\n      }else if (p === 'next'){\r\n        let h = state.movedHeight + state.clientHeight/2;\r\n        if (h < 0) {\r\n          h = 0\r\n        }\r\n        state.movedHeight = h;\r\n      }else if (p === 'pause'){\r\n        state.paused = +(!state.paused);\r\n      }\r\n    },\r\n    setViewerCSS: (state, action) => {\r\n      state.viewerCSS = Object.assign({}, state.viewerCSS, action.payload);\r\n    },\r\n    setState: (state, action) => {\r\n      const {key, value} = action.payload;\r\n      state[key] = value;\r\n    },\r\n    animation: (state, action) => {\r\n      console.log('inside animation')\r\n      if (action.payload === 'start'){\r\n        // setInterval(() => {\r\n        //   state.movedHeight += state.speed;\r\n        //   // document.querySelector('pre.text').style.transform = `translateY(-${movedHeight}px)`\r\n        // }, 1000)\r\n        // document.querySelector('pre.text').style.transform = `translateY(-${state.scrollHeight - state.clientHeight/2}px)`\r\n      }else if (action.payload === 'exit'){\r\n        document.querySelector('pre.text').style.transform = ''\r\n      }\r\n    }\r\n  },\r\n  extraReducers:{\r\n    // [setPlayAsync.fulfilled]: (state, action) => {}\r\n  }\r\n})\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { setSpeed, setInnerHTML, setPlay, setViewerCSS, setState, animation } = playerSlice.actions\r\nexport {setPlayAndAnimation}\r\n\r\nexport default playerSlice.reducer","var map = {\n\t\"./HomePage\": [\n\t\t19\n\t],\n\t\"./HomePage.js\": [\n\t\t19\n\t],\n\t\"./ThirdPartyLogin\": [\n\t\t44,\n\t\t3\n\t],\n\t\"./ThirdPartyLogin.js\": [\n\t\t44,\n\t\t3\n\t],\n\t\"./TopicsPage\": [\n\t\t42,\n\t\t0,\n\t\t5,\n\t\t4\n\t],\n\t\"./TopicsPage.js\": [\n\t\t42,\n\t\t0,\n\t\t5,\n\t\t4\n\t],\n\t\"./TopicsPageMQTT\": [\n\t\t43,\n\t\t0,\n\t\t1,\n\t\t2\n\t],\n\t\"./TopicsPageMQTT.js\": [\n\t\t43,\n\t\t0,\n\t\t1,\n\t\t2\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 57;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./Setting\": [\n\t\t20,\n\t\t9\n\t],\n\t\"./Setting.js\": [\n\t\t20,\n\t\t9\n\t],\n\t\"./Setting.module.scss\": [\n\t\t26,\n\t\t7\n\t],\n\t\"./Viewer\": [\n\t\t21,\n\t\t9\n\t],\n\t\"./Viewer.js\": [\n\t\t21,\n\t\t9\n\t],\n\t\"./Viewer.module.scss\": [\n\t\t27,\n\t\t7\n\t]\n};\n\nfunction webpackAsyncContext(req) {\n\treturn Promise.resolve().then(function() {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\n\t\tvar ids = map[req], id = ids[0];\n\t\treturn __webpack_require__.t(id, ids[1])\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 58;\nmodule.exports = webpackAsyncContext;","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n} from \"react-router-dom\";\n\n// https://loadable-components.com/docs/getting-started/\n\n// pages or components\nimport HomePage from './pages/HomePage'\n\n// dynamically loaded pages or components\nimport {AsyncPage, ErrorBoundary} from './helpers'\n\n\nexport default function App() {\n  return (\n    <Router basename=\"/web-prompter\">\n      <div>\n        <ul className=\"nav\">\n          <li>\n            <Link to=\"/\">Home</Link>\n          </li>\n          <li>\n            <Link to=\"/3login\">ThirdPartyLogin</Link>\n          </li>\n          <li>\n            <Link to=\"/topics\">Topics</Link>\n          </li>\n        </ul>\n        <ErrorBoundary>\n          <Switch>\n            <Route exact path=\"/\">\n              <HomePage />\n            </Route>\n            <Route path=\"/3login\">\n              <AsyncPage page=\"ThirdPartyLogin\" />\n            </Route>\n            <Route path=\"/topics\">\n              <AsyncPage page=\"TopicsPageMQTT\" />\n            </Route>\n            <Route path=\"*\">\n              <>404 error, not found</>\n            </Route>\n          </Switch>\n        </ErrorBoundary>\n      </div>\n    </Router>\n  );\n}\n","import { configureStore } from '@reduxjs/toolkit'\r\nimport player from './reducers/playerSlice'\r\n\r\n// https://redux-toolkit.js.org/usage/usage-guide\r\nexport default configureStore({\r\n  reducer: {\r\n    player,\r\n  },\r\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\n\nimport store from './store'\nimport { Provider } from 'react-redux'\n\nReactDOM.render(\n  <Provider store={store}>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}